{"version":3,"sources":["../src/views.js"],"names":["init","contentBank","document","querySelector","selectors","elements","contentbank","registerListenerEvents","fileArea","filearea","searchInput","searchinput","clearSearchButton","clearsearch","searchIcon","searchicon","shownItems","querySelectorAll","listitem","addEventListener","value","classList","remove","add","forEach","listItem","getAttribute","toLowerCase","includes","focus","viewGrid","viewgrid","viewList","viewlist","sortByName","sortname","ascending","contains","sortList","slice","call","sort","a","b","appendChild"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Content bank UI actions.\n *\n * @module     core_contentbank/views\n * @package    core_contentbank\n * @copyright  2020 Bas Brands <bas@moodle.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport {debounce} from 'core/utils';\nimport selectors from 'core_contentbank/selectors';\n\n/**\n * Set up the contentbank views.\n *\n * @method init\n */\nexport const init = () => {\n    const contentBank = document.querySelector(selectors.elements.contentbank);\n\n    registerListenerEvents(contentBank);\n};\n\n\n/**\n * Register contentbank related event listeners.\n *\n * @method registerListenerEvents\n * @param {HTMLElement} contentBank The DOM node of the content bank\n */\nconst registerListenerEvents = (contentBank) => {\n\n    // The search.\n    const fileArea = document.querySelector(selectors.elements.filearea);\n    const searchInput = contentBank.querySelector(selectors.elements.searchinput);\n    const clearSearchButton = contentBank.querySelector(selectors.elements.clearsearch);\n    const searchIcon = contentBank.querySelector(selectors.elements.searchicon);\n    const shownItems = fileArea.querySelectorAll(selectors.elements.listitem);\n\n    // The search input is triggered.\n    searchInput.addEventListener('input', debounce(() => {\n        // Display the search results.\n        if (searchInput.value !== '') {\n            clearSearchButton.classList.remove('d-none');\n            searchIcon.classList.add('d-none');\n        } else {\n            clearSearchButton.classList.add('d-none');\n            searchIcon.classList.remove('d-none');\n        }\n        shownItems.forEach((listItem) => {\n            if (listItem.getAttribute('data-file').toLowerCase().includes(searchInput.value.toLowerCase())) {\n                listItem.classList.remove('d-none');\n            } else {\n                listItem.classList.add('d-none');\n            }\n        });\n    }, 300));\n\n    // Clear search results and the search input.\n    clearSearchButton.addEventListener('click', () => {\n        shownItems.forEach((listItem) => {\n            listItem.classList.remove('d-none');\n        });\n        searchInput.value = \"\";\n        searchInput.focus();\n    });\n\n    // The view buttons.\n    const viewGrid = contentBank.querySelector(selectors.elements.viewgrid);\n    const viewList = contentBank.querySelector(selectors.elements.viewlist);\n\n    viewGrid.addEventListener('click', () => {\n        contentBank.classList.remove('view-list');\n        contentBank.classList.add('view-grid');\n        viewGrid.classList.add('active');\n        viewList.classList.remove('active');\n    });\n\n    viewList.addEventListener('click', () => {\n        contentBank.classList.remove('view-grid');\n        contentBank.classList.add('view-list');\n        viewList.classList.add('active');\n        viewGrid.classList.remove('active');\n    });\n\n    // Sort by name alphabetical\n    const sortByName = contentBank.querySelector(selectors.elements.sortname);\n    sortByName.addEventListener('click', () => {\n        let ascending = true;\n        if (sortByName.classList.contains('dir-none')) {\n            sortByName.classList.remove('dir-none');\n            sortByName.classList.add('dir-asc');\n        } else if (sortByName.classList.contains('dir-asc')) {\n            sortByName.classList.remove('dir-asc');\n            sortByName.classList.add('dir-desc');\n            ascending = false;\n        } else if (sortByName.classList.contains('dir-desc')) {\n            sortByName.classList.remove('dir-desc');\n            sortByName.classList.add('dir-asc');\n            ascending = true;\n        }\n\n        let sortList = [].slice.call(shownItems).sort(function (a, b) {\n            if (ascending) {\n                return a.getAttribute('data-file') > b.getAttribute('data-file') ? 1 : -1;\n            } else {\n                return a.getAttribute('data-file') < b.getAttribute('data-file') ? 1 : -1;\n            }\n        });\n        sortList.forEach(function (listItem) {\n            fileArea.appendChild(listItem);\n        });\n    });\n};"],"file":"views.min.js"}